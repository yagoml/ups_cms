var extend=function(a,b){function c(){this.constructor=a}for(var d in b)hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},hasProp={}.hasOwnProperty;define(["jquery","underscore","backbone",ENV+"/js/router","text!src/templates/admin/menu.html","text!"+ENV+"/css/admin/menu.css"],function(a,b,c,d,e,f){return function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return extend(d,c),d.prototype.template=b.template(e),d.prototype.events={"click .menu-parent, .submenu-indicator":"toggleDropMenu","click .link-menu":"redirectTable"},d.prototype.initialize=function(a){this.openedData=null!=a?a:null},d.prototype.render=function(){return a.when.apply(a,[loadCssInline(f),this.getCmsTables()]).then(function(a){return function(){return a.$el.html(a.template({tables:a.tables,openedData:null!=a.openedData?a.openedData:void 0})),a.checkOpenedData()}}(this)),this},d.prototype.getCmsTables=function(){return a.ajax({type:"post",dataType:"json",url:baseUrl+"tableInfos/cmsTables",success:function(a){return function(b){a.tables=b}}(this)})},d.prototype.toggleDropMenu=function(b){var c,d;return b.stopPropagation(),b.preventDefault(),c=a(b.target),d=200,c.hasClass("submenu-indicator")&&(c=c.parent()),c.hasClass("opened")?(c.next(".submenu").slideUp(d),c.removeClass("opened"),c.removeClass("submenu-indicator-minus")):(c.next(".submenu").slideDown(d),c.addClass("opened"),c.addClass("submenu-indicator-minus"))},d.prototype.checkOpenedData=function(){var a;return a=this.$(".selected-menu").closest(".submenu"),a.show(),a.prev(".menu-parent").addClass("opened submenu-indicator-minus")},d.prototype.redirectTable=function(b){var c;return c=a(b.target).attr("ref"),this.toggleOpenedData(c),window.location.hash="#admin/autoCrud/"+c},d.prototype.toggleOpenedData=function(c){return this.$(".selected-menu").removeClass("selected-menu"),b.each(this.$(".link-menu"),function(b){return function(b){var d;if(d=a(b),d.attr("ref")===c)return d.addClass("selected-menu")}}())},d}(c.View)});