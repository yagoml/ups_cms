var extend=function(a,b){function c(){this.constructor=a}for(var d in b)hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},hasProp={}.hasOwnProperty;define(["jquery","underscore","backbone",ENV+"/js/components/loader",ENV+"/js/components/autoCrud/editData","text!src/templates/components/autoCrud/newDataTpl.html","text!src/templates/components/upload/upload.html"],function(a,b,c,d,e,f,g){return function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return extend(c,a),c.prototype.template=b.template(f),c.prototype.events={"submit #newDataForm":"prepareToSave"},c.prototype.afterRender=function(){var a,c,d;if(a=this.getCharsPerLine(),c="",d=!1,b.each(this.tableInfos,function(d){return function(e,f){var g,h,i;if(!(d.isFileDirectory(e.default)||(g=(null!=(i=b.findWhere(d.tableTitles,{campo:e.name}))?i.nome:void 0)||e.name,h=d.systemFields.includes(e.name),e.primary_key||h||b.findWhere(d.fks,{COLUMN_NAME:e.name}))))return c+="<div class='form-box-edit' style=' "+("text"===e.type||"varchar"===e.type?"width: 100%;":"width: fit-content; margin-right: 15px;")+" '><label>"+g+"</label>","text"!==e.type&&"varchar"!==e.type?c+="<input type='"+d.inputTypes[e.type]+"' id='"+e.name+"' name='"+e.name+"' class='form-control'>":c+="<textarea class='form-control' id='"+e.name+"' name='"+e.name+"' rows='"+("undefined"!=typeof dataLen&&null!==dataLen?Math.ceil(dataLen/a):"text"===e.type?3:1)+"'></textarea>",c+="</div>"}}(this)),this.$(".form-body").html(c),d)return this.filesUpload()},c.prototype.filesUpload=function(){var a,b;return this.$(".fn-upload").html(g),a=this.getFieldDirectory(this.model),b=this.model.get(this.options.pk),this.$("#fine-uploader-manual-trigger").fineUploader({autoUpload:!1,multiple:!1,template:"qq-template-manual-trigger",deleteFile:{enabled:!0,endpoint:baseUrl+"dados/deleteFile",method:"POST",params:{table:"uploaded_single_files",fieldDir:null!=a?a:void 0,singleFile:!0,parentTable:this.table,parentPK:this.options.pk,id:b}},request:{endpoint:baseUrl+"dados/upload",params:{fk:"id_registro",id:b,table:"uploaded_single_files",singleFile:!0,parentTable:this.table,parentPK:this.options.pk,fieldDir:a}},thumbnails:{placeholders:{waitingPath:baseUrl+"/lib/fine-uploader/placeholders/waiting-generic.png",notAvailablePath:baseUrl+"/lib/fine-uploader/placeholders/not_available-generic.png"}},callbacks:{onError:function(a,b,c,d){return alert(JSON.parse(d.response).error)}}}),this.$("#trigger-upload").click(function(a){return function(){return a.$("#fine-uploader-manual-trigger").fineUploader("uploadStoredFiles")}}(this))},c}(e)});