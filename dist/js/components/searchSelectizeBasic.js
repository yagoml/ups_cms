define(["jquery","underscore","selectize"],function(a,b){return loadCss(baseUrl+"lib/selectize/css/selectize.bootstrap3.css"),function(){function c(){}return c.prototype.selectize=function(c){return this.options=c,this.options.el.selectize({valueField:this.options.valueField,labelField:this.options.labelField,searchField:this.options.searchField,create:!1,persist:!1,preload:null!=this.options.preLoad,placeholder:null!=this.options.placeholder?this.options.placeholder:"Pesquisar",render:{option:function(a){return function(b,c){return null!=a.options.itemTpl?"<div class='option'>"+a.replaceKeys(a.options.itemTpl,b)+"</div>":"<div class='option'>"+b[a.options.labelField]+"</div>"}}(this)},load:function(c){return function(d,e){var f;return d.length<=2||/((?![\wáàâãéèêíïóôõöúçñ%]).)/gi.test(d)?e():(f={},null!=c.options.preData&&b.each(c.options.preData,function(a,b){var c;return c=Object.keys(a)[b],f[c]=a[c]}),f[c.options.labelField]=d,a.ajax({url:c.options.url,type:"POST",dataType:"json",data:f,error:function(){return e()},success:function(a){return c.result=a,e(c.result)}}))}}(this)}),this.select=this.options.el[0].selectize,this.delegateEvents(),this.select},c.prototype.delegateEvents=function(){if(null!=this.options.callback&&this.select.on("item_add",this.options.callback),null!=this.options.clearOnBlur)return this.select.on("blur",this.select.clearOptions),a("#selectItens-selectized").keyup(this.checkKey.bind(this))},c.prototype.replaceKeys=function(a,c){var d;return d=a.match(/\$[\w]+/gi),b.each(d,function(b){return function(b){return a=a.replace(b,c[b.replace("$","")])}}()),a},c.prototype.checkKey=function(b){if(!(a(b.target).val().length>2))return this.select.close(),this.select.clearOptions()},c}()});